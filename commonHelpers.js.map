{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function searchImagesProcess(inputQuery, page) {\n  const URL = 'https://pixabay.com/api/';\n  const KEY = '45377125-53da1a565bd8b37af868a9bcd';\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: KEY,\n        q: inputQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch {\n    error => {\n      iziToast.error({\n        position: 'topRight',\n        message: `${error.message}`,\n      });\n    };\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery-container');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst lightbox = new SimpleLightbox('.gallery-container a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(data) {\n  const galleryMarkup = data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" />\n          <div class=\"statictics\">\n            <div class = \"statictics-text\"><h3>Likes</h3><p> ${likes}</p></div>\n            <div class = \"statictics-text\"><h3>Views</h3><p>${views}</p></div>\n            <div class = \"statictics-text\"><h3>Comments</h3><p>${comments}</p></div>\n            <div class = \"statictics-text\"><h3>Downloads</h3><p>${downloads}</p></div>\n          </div>\n        </a></li>`;\n      }\n    )\n    .join('');\n  hideLoader();\n  gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  const clear = '';\n  gallery.innerHTML = clear;\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\nexport function hideBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\nexport function enableBtn() {\n  loadMoreBtn.disabled = false;\n}\nexport function disableBtn() {\n  loadMoreBtn.disabled = true;\n}\n\nexport function scrollPage() {\n  const elementHeight =\n    gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: elementHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImagesProcess } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  hideBtn,\n  showBtn,\n  disableBtn,\n  enableBtn,\n  scrollPage,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst params = {\n  page: 1,\n  maxPage: 0,\n  q: '',\n  perPage: 15,\n};\n\nform.addEventListener('submit', handleSearchImages);\n\nasync function handleSearchImages(event) {\n  event.preventDefault();\n  clearGallery();\n\n  params.q = event.currentTarget.elements.input.value.trim();\n  if (params.q === '') {\n    iziToast.error({\n      message: 'Please enter your search query.',\n      position: 'topRight',\n    });\n    form.reset();\n    return;\n  }\n  showLoader();\n\n  params.page = 1;\n\n  try {\n    const { hits, totalHits } = await searchImagesProcess(\n      params.q,\n      params.page\n    );\n    params.maxPage = Math.ceil(totalHits / params.perPage);\n    createGallery(hits);\n\n    if (params.maxPage > 1) {\n      showBtn();\n      enableBtn();\n      loadMoreBtn.addEventListener('click', handleLoadMore);\n    }\n    // else {\n    //   hideBtn();\n    // }\n    if (hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  } finally {\n    form.reset();\n  }\n}\n\nasync function handleLoadMore() {\n  disableBtn();\n  showLoader();\n  params.page += 1;\n  try {\n    const { hits } = await searchImagesProcess(params.q, params.page);\n    createGallery(hits);\n    scrollPage();\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  } finally {\n    hideLoader();\n    if (params.page === params.maxPage) {\n      loadMoreBtn.removeEventListener('click', handleLoadMore);\n      hideBtn();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      enableBtn();\n    }\n  }\n}\n"],"names":["searchImagesProcess","inputQuery","page","URL","KEY","axios","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","data","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hideLoader","clearGallery","clear","showLoader","showBtn","hideBtn","enableBtn","disableBtn","scrollPage","elementHeight","form","params","handleSearchImages","event","iziToast","hits","totalHits","handleLoadMore","error"],"mappings":"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"}